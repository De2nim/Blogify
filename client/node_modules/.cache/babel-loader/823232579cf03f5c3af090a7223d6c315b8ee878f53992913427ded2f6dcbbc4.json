{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const AddBlog=()=>{const navigate=useNavigate();const[input,setInput]=useState({title:\"\",description:\"\",category:\"\"});const[file,setFile]=useState([]);const[categories,setCategory]=useState([]);useEffect(()=>{const fetchallcategories=async()=>{const res=await axios.get(\"http://localhost:9000/api/v1/get/categories\",{headers:{Authorization:\"Bearer \".concat(localStorage.getItem(\"token\"))}});setCategory(res.data);};fetchallcategories();},[]);//form data....\nconst formdata=new FormData();formdata.append(\"title\",input.title);formdata.append(\"category\",input.category);formdata.append(\"description\",input.description);formdata.append(\"thumbnail\",file);// if (input.category) {\n//     // Append the selected category as an ObjectId\n//     formdata.append(\"category\", input.category);\n// } else {\n//     // Handle case where no category is selected\n//     alert(\"Please select a category.\");\n//     return; // Prevent further execution of the function\n// }\nconst Handleaddblog=async e=>{console.log(\"\".concat(input.category));e.preventDefault();try{const res=await axios.post(\"http://localhost:9000/api/v1/add/blog\",formdata,{headers:{Authorization:\"Bearer \".concat(localStorage.getItem(\"token\"))}});alert(res.data.message);navigate(\"/\");}catch(error){alert(error.response.data.message);}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container shadow\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center my-3\",children:\"Add New Blog\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-xl-12 my-3 d-flex items-center justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:Handleaddblog,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"formGrpexinput\",className:\"form-label\",children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"title\",value:input.title,onChange:e=>setInput({...input,[e.target.name]:e.target.value}),className:\"form-control\",id:\"formGrpexinput\",placeholder:\"Blog Title\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"formGrpexinput\",className:\"form-label\",children:\"Category\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-control\",name:\"Category\",onChange:e=>setInput({...input,[e.target.name]:e.target.value}),children:[/*#__PURE__*/_jsx(\"option\",{disabled:true,children:\"Select Category\"}),categories&&categories.map(item=>{return/*#__PURE__*/_jsx(\"option\",{value:item._id,children:item.title});})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"formGrpexinput\",className:\"form-label\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",value:input.description,onChange:e=>setInput({...input,[e.target.name]:e.target.value}),placeholder:\"Blog Description\",className:\"form-control\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"formGrpexinput\",className:\"form-label\",children:\"Thumbnail\"}),/*#__PURE__*/_jsx(\"input\",{name:\"thumbnail\",type:\"file\",onChange:e=>setFile(e.target.files[0]),className:\"form-control\",id:\"formGrpexinput\",placeholder:\"Select Thumbnail\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary btn-block\",children:\"Add Blog\"})})]})})})]})});};export default AddBlog;","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AddBlog","navigate","input","setInput","title","description","category","file","setFile","categories","setCategory","fetchallcategories","res","get","headers","Authorization","concat","localStorage","getItem","data","formdata","FormData","append","Handleaddblog","e","console","log","preventDefault","post","alert","message","error","response","children","className","onSubmit","htmlFor","type","name","value","onChange","target","id","placeholder","disabled","map","item","_id","files"],"sources":["C:/Blogify/client/src/Pages/AddBlog.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst AddBlog = () => {\r\n\r\n    const navigate = useNavigate();\r\n\r\n    const [input, setInput] = useState({\r\n        title: \"\",\r\n        description: \"\",\r\n        category: \"\",\r\n    });\r\n\r\n    const [file, setFile] = useState([]);\r\n    const [categories, setCategory] = useState([]);\r\n\r\n    useEffect(() => {\r\n        const fetchallcategories = async () => {\r\n            const res = await axios.get(\"http://localhost:9000/api/v1/get/categories\",\r\n                {\r\n                    headers: {\r\n                        Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n\r\n                    },\r\n                }\r\n            );\r\n            setCategory(res.data);\r\n        };\r\n        fetchallcategories();\r\n    }, []);\r\n\r\n    //form data....\r\n    const formdata = new FormData();\r\n    formdata.append(\"title\", input.title);\r\n    formdata.append(\"category\", input.category);\r\n    formdata.append(\"description\", input.description);\r\n    formdata.append(\"thumbnail\", file);\r\n\r\n    // if (input.category) {\r\n    //     // Append the selected category as an ObjectId\r\n    //     formdata.append(\"category\", input.category);\r\n    // } else {\r\n    //     // Handle case where no category is selected\r\n    //     alert(\"Please select a category.\");\r\n    //     return; // Prevent further execution of the function\r\n    // }\r\n\r\n\r\n\r\n    const Handleaddblog = async (e) => {\r\n        console.log(`${input.category}`);\r\n        e.preventDefault();\r\n        try {\r\n            const res = await axios.post(\"http://localhost:9000/api/v1/add/blog\", formdata,\r\n                {\r\n                    headers: {\r\n                        Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n\r\n                    },\r\n                }\r\n            );\r\n            alert(res.data.message);\r\n            navigate(\"/\");\r\n        } catch (error) {\r\n            alert(error.response.data.message);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <div className=\"container shadow\">\r\n                <h2 className=\"text-center my-3\">\r\n                    Add New Blog\r\n                </h2>\r\n                <div className=\"col-xl-12 my-3 d-flex items-center justify-content-center\">\r\n                    <div className=\"row\">\r\n                        <form onSubmit={Handleaddblog}>\r\n                            <div className=\"mb-3\">\r\n                                <label htmlFor=\"formGrpexinput\" className=\"form-label\">\r\n                                    Title\r\n                                </label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    name=\"title\"\r\n                                    value={input.title}\r\n                                    onChange={(e) => setInput({ ...input, [e.target.name]: e.target.value })}\r\n                                    className=\"form-control\"\r\n                                    id=\"formGrpexinput\"\r\n                                    placeholder=\"Blog Title\"\r\n                                />\r\n                            </div>\r\n                            <div className=\"mb-3\">\r\n                                <label htmlFor=\"formGrpexinput\" className=\"form-label\">\r\n                                    Category\r\n                                </label>\r\n                                <select className=\"form-control\" name=\"Category\"\r\n                                    onChange={(e) => setInput({ ...input, [e.target.name]: e.target.value })}\r\n                                >\r\n                                    <option disabled>Select Category</option>\r\n                                    {categories && categories.map((item) => {\r\n                                        return <option value={item._id} >{item.title}</option>;\r\n                                    }\r\n                                    )}\r\n                                </select>\r\n                            </div>\r\n                            <div className=\"mb-3\">\r\n                                <label htmlFor=\"formGrpexinput\" className=\"form-label\">\r\n                                    Description\r\n                                </label>\r\n                                <textarea\r\n                                    name=\"description\"\r\n                                    value={input.description}\r\n                                    onChange={(e) => setInput({ ...input, [e.target.name]: e.target.value })}\r\n                                    placeholder=\"Blog Description\"\r\n                                    className=\"form-control\"\r\n                                />\r\n                            </div>\r\n                            <div className=\"mb-3\">\r\n                                <label htmlFor=\"formGrpexinput\" className=\"form-label\">\r\n                                    Thumbnail\r\n                                </label>\r\n                                <input\r\n                                    name=\"thumbnail\"\r\n                                    type=\"file\"\r\n                                    onChange={(e) => setFile(e.target.files[0])}\r\n                                    className=\"form-control\"\r\n                                    id=\"formGrpexinput\"\r\n                                    placeholder=\"Select Thumbnail\"\r\n                                />\r\n                            </div>\r\n                            <div className=\"mb-3\">\r\n                                <button type=\"submit\" className=\"btn btn-primary btn-block\">\r\n                                    Add Blog\r\n                                </button>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default AddBlog;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}